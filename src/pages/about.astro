---
import { Icon } from "astro-icon/components";
import aboutImg from "@/assets/about-kesku.png";
import aboutImgIsukash from "@/assets/about-kesku-isukash.png";
import PageLayout from "@/layouts/Base.astro";
import { Image } from "astro:assets";

const meta = {
	description:
		"I'm Kesku, a self-taught dev, former ML student (dropped out), and train enjoyer from the UK!",
	title: "About",
};

const games = [
	{ name: "Yakuza", link: "https://store.steampowered.com/app/2988580/" },
	{ name: "Zenless Zone Zero", link: "https://zenless.hoyoverse.com/" },
	{ name: "Cyberpunk 2077", link: "https://store.steampowered.com/app/1091500/" },
	{ name: "GTA Online", link: "https://store.steampowered.com/app/3240220/" },
	{ name: "Minecraft", link: "https://www.minecraft.net/" },
];

const socials = [
	{ name: "GitHub", link: "https://github.com/kesku", icon: "mdi:github" },
	{ name: "Twitter", link: "https://x.com/yoimnotkesku", icon: "mdi:twitter" },
	{ name: "Discord", link: "https://discordapp.com/users/539468067923820546", icon: "mdi:discord" },
	{ name: "Email", link: "mailto:admin@kesku.me", icon: "mdi:email", extra: "admin@kesku.me" },
];

const gamesListHtml = games
	.map((game, i) => {
		const separator = i < games.length - 2 ? ", " : i === games.length - 2 ? ", and " : "";
		return `<a href="${game.link}" target="_blank" rel="noopener noreferrer" class="text-accent transition-all hover:underline hover:underline-offset-2">${game.name}</a>${separator}`;
	})
	.join("");
---

<style>
	.attribution-container .attribution-isukash {
		pointer-events: none;
	}

	.image-wrapper[data-flipped="true"] .flip-inner {
		transform: rotateY(180deg);
	}
	.image-wrapper[data-flipped="true"] .attribution-container .attribution-romye {
		opacity: 0;
		pointer-events: none;
	}
	.image-wrapper[data-flipped="true"] .attribution-container .attribution-isukash {
		opacity: 1;
		pointer-events: auto;
	}
</style>

<script>
	function initImageHover() {
		const wrapper = document.querySelector(".image-wrapper");
		const imageContainer = wrapper?.querySelector(".image-container");
		const attributionContainer = wrapper?.querySelector(".attribution-container");

		if (!wrapper || !imageContainer || !attributionContainer) return;

		let imageHovered = false;

		imageContainer.addEventListener("mouseenter", () => {
			imageHovered = true;
			wrapper.setAttribute("data-flipped", "true");
		});

		wrapper.addEventListener("mouseleave", () => {
			imageHovered = false;
			wrapper.removeAttribute("data-flipped");
		});

		attributionContainer.addEventListener("mouseenter", () => {
			if (imageHovered) {
				wrapper.setAttribute("data-flipped", "true");
			}
		});
	}
	initImageHover();
	document.addEventListener("astro:page-load", initImageHover);
</script>

<PageLayout meta={meta}>
	<section class="mb-12">
		<div class="mb-8 flex items-center gap-4">
			<div class="h-1 w-12 bg-accent"></div>
			<span class="text-sm font-medium uppercase tracking-widest text-accent">About</span>
		</div>

		<div class="flex flex-col gap-8 sm:flex-row sm:items-start">
			<div class="image-wrapper shrink-0">
				<div
					class="image-container relative h-[180px] w-[180px] cursor-pointer [perspective:1000px]"
				>
					<div
						class="flip-inner relative h-full w-full transition-transform duration-500 [transform-style:preserve-3d]"
					>
						<div class="absolute inset-0 [backface-visibility:hidden]">
							<Image
								alt="Profile picture of Kesku"
								class="h-full w-full rounded-xl border border-border object-cover"
								fetchpriority="high"
								loading="eager"
								src={aboutImg}
								width={400}
								densities={[1, 2]}
							/>
						</div>
						<div class="absolute inset-0 [backface-visibility:hidden] [transform:rotateY(180deg)]">
							<Image
								alt="Profile picture of Kesku, art is of Usada Pekora from Hololive by @isukash"
								class="h-full w-full rounded-xl border border-border object-cover"
								src={aboutImgIsukash}
								width={400}
								densities={[1, 2]}
							/>
						</div>
					</div>
				</div>
				<div class="attribution-container relative mt-2">
					<p
						class="attribution-romye text-center text-xs text-muted opacity-100 transition-opacity duration-300"
					>
						Art by <a
							href="https://x.com/romye_99"
							target="_blank"
							rel="noopener noreferrer"
							class="text-accent transition-all hover:underline hover:underline-offset-2"
							>@romye_99</a
						>
					</p>
					<p
						class="attribution-isukash absolute inset-x-0 top-0 text-center text-xs text-muted opacity-0 transition-opacity duration-300"
					>
						Art by <a
							href="https://twitter.com/isukash"
							target="_blank"
							rel="noopener noreferrer"
							class="text-accent transition-all hover:underline hover:underline-offset-2"
							>@isukash</a
						>
					</p>
				</div>
			</div>

			<div>
				<p class="mb-4 text-textColor">
					UK-based software engineer working @ <a
						href="https://www.perplexity.ai/"
						target="_blank"
						rel="noopener noreferrer"
						class="text-accent transition-all hover:underline hover:underline-offset-2"
						>Perplexity AI</a
					>. I focus on developer relations — helping devs build cool things, creating technical
					content, and bridging the gap between product and community.
				</p>
				<p class="text-muted">
					Passionate about AI, developer experience, and making complex tech feel approachable.
				</p>
			</div>
		</div>
	</section>

	<section class="mb-12">
		<div class="mb-6 flex items-center gap-4">
			<div class="h-1 w-8 bg-accent/50"></div>
			<h2 class="text-xl font-semibold">What I'm Into</h2>
		</div>

		<div class="grid gap-6 sm:grid-cols-2">
			<div class="rounded-xl border border-border bg-surface/30 p-6">
				<Icon name="mdi:controller" class="mb-3 h-8 w-8 text-accent" />
				<h3 class="mb-2 font-semibold">Gaming</h3>
				<p class="mb-4 text-sm text-muted" set:html={`Big fan of ${gamesListHtml}.`} />
				<p class="mb-4 text-sm text-muted">
					As a kid, I'd play till late at night, and the game was all I thought about. Now the music
					hooks sends me back in time, and with VR (Through <a
						href="https://www.vivecraft.org/"
						target="_blank"
						rel="noopener noreferrer"
						class="text-accent transition-all hover:underline hover:underline-offset-2">Vivecraft</a
					>), I'm closer to it than ever.
				</p>
				<p class="text-sm text-muted">
					BTW: I use a <a
						href="https://www.meta.com/quest/quest-3/"
						target="_blank"
						rel="noopener noreferrer"
						class="text-accent transition-all hover:underline hover:underline-offset-2">Quest 3</a
					> and <a
						href="https://varjo.com/products/varjo-vr-3"
						target="_blank"
						rel="noopener noreferrer"
						class="text-accent transition-all hover:underline hover:underline-offset-2"
						>Varjo VR-3</a
					> for my VR gaming.
				</p>
			</div>

			<div class="rounded-xl border border-border bg-surface/30 p-6">
				<Icon name="mdi:account-group" class="mb-3 h-8 w-8 text-accent" />
				<h3 class="mb-2 font-semibold">Community</h3>
				<p class="mb-4 text-sm text-muted">
					Moderating communities since I was 11, starting on old <a
						href="https://www.perplexity.ai/search/what-was-the-amino-app-ZfVunsx2Tfe8tdQlK39GoA#0"
						target="_blank"
						rel="noopener noreferrer"
						class="text-accent transition-all hover:underline hover:underline-offset-2"
						>Amino forums</a
					>.
				</p>
				<p class="mb-4 text-sm text-muted">
					Helped manage the <a
						href="https://discord.gg/openai"
						target="_blank"
						rel="noopener noreferrer"
						class="text-accent transition-all hover:underline hover:underline-offset-2"
						>OpenAI Discord</a
					> up to its peak of 3.5M members (at one point 2nd biggest on Discord).
				</p>
				<p class="text-sm text-muted">
					I love answering questions, building relationships, and creating spaces where people can
					thrive.
				</p>
			</div>
		</div>
	</section>

	<section class="mb-12">
		<div class="mb-6 flex items-center gap-4">
			<div class="h-1 w-8 bg-accent/50"></div>
			<h2 class="text-xl font-semibold">"Kesku" is an acronym</h2>
		</div>

		<p class="mb-4 text-textColor">
			It stands for <span class="font-semibold text-accent"
				>Keep Everything Simple, Keep Understanding</span
			>.
		</p>
		<p class="text-muted">
			It's a mindset I try to carry into everything I do: make things understandable, approachable,
			and clear. Whether it's documentation, APIs, or developer tools — clarity makes all the
			difference.
		</p>
	</section>

	<section class="mb-12">
		<div class="mb-6 flex items-center gap-4">
			<div class="h-1 w-8 bg-accent/50"></div>
			<h2 class="text-xl font-semibold">Connect</h2>
		</div>

		<ul class="flex flex-wrap items-center gap-4">
			{
				socials.map(({ name, link, icon, extra }) => (
					<li>
						<a
							href={link}
							target={link.startsWith("mailto:") ? undefined : "_blank"}
							rel={link.startsWith("mailto:") ? undefined : "noopener noreferrer"}
							class="group flex items-center gap-2 rounded-lg border border-accent/30 bg-accent/5 px-4 py-2 transition-all duration-300 hover:border-accent hover:bg-accent/15"
						>
							<Icon
								aria-hidden="true"
								class="h-5 w-5 text-accent transition-transform group-hover:scale-110"
								focusable="false"
								name={icon}
							/>
							<span class="text-sm font-medium">{name}</span>
							{extra && <span class="text-xs text-muted">({extra})</span>}
						</a>
					</li>
				))
			}
		</ul>
	</section>
</PageLayout>
